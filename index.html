<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Arbre de d√©cision ‚Äî Offres (N0 √† N3)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; }
    .card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 14px; max-width: 720px; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    button { padding: 10px 12px; border-radius: 10px; border: 1px solid #d1d5db; background: white; cursor: pointer; }
    button:hover { border-color: #9ca3af; }
    .meta { color: #6b7280; font-size: 13px; margin-top: 6px; }
    .badge { display: inline-block; padding: 4px 8px; border-radius: 999px; border: 1px solid #d1d5db; font-size: 12px; }
    .result { margin-top: 12px; padding: 12px; border-radius: 12px; border: 1px solid #e5e7eb; }
    .hint { margin-top: 10px; font-size: 13px; color: #374151; }
    .muted { color: #6b7280; }
    .small { font-size: 12px; }
    .divider { height: 1px; background: #e5e7eb; margin: 12px 0; }
  </style>
</head>
<body>
  <div class="card">
    <div class="badge">MATERIEL-LEVAGE</div>
    <h2 style="margin:10px 0 6px;">üå≥ Arbre de d√©cision ‚Äî Niveau d‚Äôoffre</h2>
    <div class="meta">R√©pondre vite, juste, et solliciter le support manag√©rial au plus juste.</div>

    <div class="divider"></div>

    <div id="stepTitle" style="font-weight:700;"></div>
    <div id="stepDesc" class="meta"></div>

    <div class="row" id="choices"></div>

    <div id="result" class="result" style="display:none;"></div>

    <div class="hint">
      ‚úÖ <b>R√®gle terrain :</b> si tu h√©sites entre deux niveaux, choisis le plus haut.
      <div class="muted small">N0 &lt; 24h ¬∑ N1 &lt; 48h ¬∑ N2 48‚Äì72h ¬∑ N3 4‚Äì5 jours ouvr√©s</div>
    </div>
  </div>

  <script>
    const SLA = {
      N0: "< 24 h",
      N1: "< 48 h",
      N2: "48‚Äì72 h",
      N3: "4‚Äì5 jours ouvr√©s"
    };

    // Nodes: question + choices -> next node OR result
    const tree = {
      start: {
        title: "Question 1 ‚Äî Panier web d√©j√† pass√© ?",
        desc: "Le client a-t-il d√©j√† valid√© un panier sur MATERIEL-LEVAGE.COM ?",
        choices: [
          { label: "‚úÖ Oui", next: "web_complement" },
          { label: "‚ùå Non", next: "catalogue_standard" }
        ]
      },
      web_complement: {
        title: "Question 2 ‚Äî Compl√©ment financier simple ?",
        desc: "Uniquement transport / conditionnement / frais logistiques / ajustement de paiement (sans modifier le produit) ?",
        choices: [
          { label: "‚úÖ Oui", result: { level: "N0", label: "üîµ Niveau 0", who: "Commercial flux entrant / ADV", note: "Traitement automatique. Pas de n√©gociation. Pas de validation manag√©riale." } },
          { label: "‚ùå Non", next: "catalogue_standard" }
        ]
      },
      catalogue_standard: {
        title: "Question 3 ‚Äî Offre catalogue standard ?",
        desc: "Produit catalogue, configuration standard, fournisseur r√©f√©renc√©, marge connue ?",
        choices: [
          { label: "‚úÖ Oui", result: { level: "N1", label: "üü¢ Niveau 1", who: "Commercial flux entrant", note: "Autonomie compl√®te. Objectif : r√©ponse < 48h." } },
          { label: "‚ùå Non", next: "enjeu_ou_ajustement" }
        ]
      },
      enjeu_ou_ajustement: {
        title: "Question 4 ‚Äî Ajustement / enjeu / client strat√©gique ?",
        desc: "D√©rogation au cadre (marge, combinaison, client strat√©gique) mais sans impact structurel sur l‚Äôoffre ?",
        choices: [
          { label: "‚úÖ Oui", result: { level: "N2", label: "üü° Niveau 2", who: "Commercial Plus / R√©f√©rent offres", note: "Validation r√©f√©rent. Management sollicit√© uniquement si d√©rogation strat√©gique majeure." } },
          { label: "‚ùå Non", result: { level: "N3", label: "üî¥ Niveau 3", who: "Manager central", note: "Offre structurante. Pilotage + capitalisation (r√®gle / standard / brique d‚Äôoffre)." } }
        ]
      }
    };

    let current = "start";

    function renderNode(nodeId) {
      current = nodeId;
      const node = tree[nodeId];
      document.getElementById("result").style.display = "none";

      document.getElementById("stepTitle").textContent = node.title;
      document.getElementById("stepDesc").textContent = node.desc;

      const choices = document.getElementById("choices");
      choices.innerHTML = "";

      node.choices.forEach(ch => {
        const btn = document.createElement("button");
        btn.textContent = ch.label;
        btn.onclick = () => {
          if (ch.result) return showResult(ch.result);
          renderNode(ch.next);
        };
        choices.appendChild(btn);
      });
    }

    function showResult(res) {
      const box = document.getElementById("result");
      box.style.display = "block";
      box.innerHTML = `
        <div style="font-weight:800; font-size:16px; margin-bottom:6px;">‚úÖ R√©sultat : ${res.label}</div>
        <div><b>D√©lai cible :</b> ${SLA[res.level]}</div>
        <div><b>Responsable :</b> ${res.who}</div>
        <div style="margin-top:8px;"><b>Note :</b> ${res.note}</div>
        <div class="divider"></div>
        <button onclick="window.__reset()">‚Ü©Ô∏è Recommencer</button>
      `;
    }

    window.__reset = () => renderNode("start");

    renderNode("start");
  </script>
</body>
</html>
